<!-- Extends all code from core/base.html -->
{% extends "core/base.html" %}

<!-- import to staticfiles -->
{% load static %}

<!-- internationalization -->
{% load i18n %}

<!-- insert css into core/base.html css block -->
{% block css %}
  <link rel="stylesheet" href="{% static 'accounts/css/profile.css' %}">
  <link rel="stylesheet" href="{% static 'accounts/css/sidebar.css' %}">
{% endblock %}

{% block body %}
  <header>

    <!-- Navbar -->
    {% include 'core/navbar.html' %}

  </header>
  <main>

    <!-- Breadcrumbs navegation -->
    <div class="row">
      <div class="col-sm-12 navegation">
        <ul class="breadcrumb pull-left">
          {% block breadcrumb %}
            <li><a href="{% url 'accounts:profile' %}">
              {% trans 'Profile' %}
            </a></li>
          {% endblock %}
        </ul>
        <p class="pull-right">
          {{ date }} <i class="fa fa-calendar"></i>
        </p>
      </div>
    </div>

    <!-- Profile page -->
    <div class="row">

      <!-- Sidebar -->
      {% include 'accounts/sidebar.html' %}

      <!-- profile -->
      <div class="col-sm-10">
        {% block profile %}
          <div class="container-fluid">

            <!-- Header -->
            <div class="page-header profile">
              <h1 class="white">{% trans 'Profile' %}</h1>
            </div>

            <!-- Body -->
            <div class="row">

              <!-- Profile photo -->
              <div class="col-sm-3">
                {% if user.photo %}
                  <img
                    src="{{ user.photo.url }}"
                    class="img-rounded img-responsive img-size center-block"
                    alt="User"
                  />
                {% else %}
                  <img
                    src="{% static 'accounts/img/user.png' %}"
                    class="img-rounded img-responsive img-size cente-block"
                    alt="User"
                  />
                {% endif %}
              </div>

              <!-- Profile information -->
              <div class="col-sm-9">

                <!-- Labels -->
                <div class="row">
                  {% if user.is_teacher %}
                    <span class="label label-primary pull-left label-text">
                      {% trans 'Teacher' %}
                    </span>
                  {% else %}
                    <span class="label label-primary pull-left label-text">
                      {% trans 'Student' %}
                    </span>
                  {% endif %}
                  <span class="label label-primary label-number pull-right">
                    ID: {{user.id}}
                  </span>
                </div>

                <!-- Personal informations -->
                {% if user.name %}
                  <h2 class="name">{{user.get_short_name}}</h2>
                {% else %}
                  <h2 class="name">{% trans 'Change your name!' %}</h2>
                {% endif %}
                <table class="lighten-blue-grey">
                  <tr>
                    <td>
                      <i class="fa fa-envelope"></i>
                      <b>{% trans 'Email' %}</b>:
                    </td>
                    <td>{{ user.email }}</td>
                  </tr>
                  <tr>
                    <td>
                      <i class="fa fa-institution"></i>
                      <b>{% trans 'Institution' %}</b>:
                    </td>
                    <td>{{ user.institution }}</td>
                  </tr>
                  <tr>
                    <td>
                      <i class="fa fa-graduation-cap"></i>
                      <b>{% trans 'Course' %}</b>:
                    </td>
                    <td>{{ user.course }}</td>
                  </tr>
                </table>

              </div> <!-- End profile information -->
            </div> <!-- End body -->

            <!-- Authentication information -->
            <div class="row">
              <div class="col-sm-12">
                <p class="lighten-blue-grey pull-left">
                  <i class="fa fa-history"></i>
                    {% trans 'Last login' %}:
                  {% if user.is_authenticated %}
                    {{user.last_login}}
                  {% else %}
                    {{ user.last_login }}
                  {% endif %}
                </p>
                <p class="lighten-blue-grey pull-right">
                  {% trans 'Updated ' %}{{ user.updated_at | timesince }} {% trans ' ago' %}</p>
              </div>
            </div>

            <hr />

            <!-- Disciplines -->
            {% include 'disciplines/list.html' %}
          </div>
        {% endblock %}
      </div>
    </div>
  </main>

  <!-- Delete modal -->
  {% include 'accounts/delete.html' %}
{% endblock %}
