<!-- Extends all code from core/base.html -->
{% extends "core/base.html" %}

<!-- Import to staticfiles -->
{% load static %}

<!-- internationalization -->
{% load i18n %}

<!-- Insert css into core/base.html css block -->
{% block css %}
  <link rel="stylesheet" href="{% static 'core/css/news_list.css' %}">
{% endblock %}

<!-- Insert html into core/base.html body block -->
{% block body %}
  <header>
    {% include 'core/navbar.html' %}
  </header>
  <main>
    <div class="container">

      <!-- News Header -->
      <div class="page-header">
        <h1 class="lighten-blue-grey">{% trans 'News' %}</h1>

        <!-- News specific tag -->
        {% if tag %}
          <p class="lighten-blue-grey pull-right">{{tag}}</p>
          <a href="{% url 'core:news' %}" class="no-decoration">{% trans 'Back' %}</a>
        {% endif %}
      </div>

      <!-- News search -->
      {% include 'core/search.html' %}

      <!-- News list -->
      <div class="panel panel-default">
        <div class="panel-body">
          {% for news in news_list %}
            <div>
              <!-- News title -->
              <h2>
                {{news.title}} <small>({{news.created_at}})</small>
              </h2>

              <!-- News details -->
              <p class="text-justify">
                <!-- Truntate the word in character 35 -->
                <!-- Go to absolute url defined in news model -->
                {{news.content|truncatewords:35}} <a href="{{news.get_absolute_url}}">{% trans 'Read more' %}</a>
              </p>

              <!-- News tags -->
              <p><i class="fa fa-tags"></i> tags:
                {% for tag in news.tags.all %}
                  <!-- Go to news-tag url and pass by argment the slug from tag -->
                  <a href="{% url 'core:news-tag' tag.slug %}" class="no-decoration">
                    {{tag}}
                  <!-- If is the last element on loop not insert , -->
                  </a>{% if not forloop.last %},{% endif %}
                {% empty %}
                  {% trans 'There is no tags' %}
                {% endfor %}
              </p>

              {% if not forloop.last %}<div class="divisor"></div>{% endif %}
            </div>
            {% empty %}
              <div class="alert alert-info">
                {% trans 'No news available' %}.
              </div>
            {% endfor %}
        </div>
      </div>

      <!-- News pagination -->
      {% include 'core/pagination.html' %}
    </div>
  </main>
{% endblock %}
